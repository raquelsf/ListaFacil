<!--
  Generated template for the PlacesPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{nome}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
    <ion-card>
      <img src="http://listfacil.com/api/public/images/{{imagem}}">
      <ion-fab right top>
        <button ion-fab class="btn-red" color="light" title="Favoritar" (click)="addFavorito()">
          <ion-icon [name]="favorito"></ion-icon>
        </button>
      </ion-fab>

      <ion-item style="border-bottom: 1px solid #d5d5d5;">
        <ion-icon name="ios-restaurant-outline" item-start large></ion-icon>
        <h2>{{nome}}</h2>
        <p>{{desc}}</p>
      </ion-item>

      <ion-item (click)="toggleAccordion()">
        <ion-icon name="ios-time-outline" item-start large ></ion-icon>
        <h2>{{status}}</h2>
        <span>Funciona {{aberto}} ás {{fechado}}</span>
        <ion-icon class="btn-red"  [name]="icon" ></ion-icon>
      </ion-item>
      <ion-list [hidden]=!accordionExapanded>
            <ion-item *ngFor="let horario of horarios">
              <small>
                  {{horario.dia}} - {{horario.aberto}} ás {{horario.fechado}}
              </small>
            </ion-item>
      </ion-list>
      <ion-item>
        <ion-grid>
          <ion-row col-12 >
              <ionic3-star-rating style="margin: 0 auto !important;"
                activeIcon = "ios-star"
                defaultIcon = "ios-star-outline"
                activeColor = "#fff176"
                defaultColor = "gray"
                readonly="false"
                [rating]="rating">
              </ionic3-star-rating>
              <span item-start>({{totalRating}})</span>
          </ion-row>
        </ion-grid>
      </ion-item>
      <ion-item>
        <ion-grid>
          <ion-row col-12>
            <ion-col col-3></ion-col>
            <ion-col col-6 >
              <ion-icon name="ios-call-outline"></ion-icon> <a href="tel:{{telefone}}">{{telefone}}</a>
              <ion-icon *ngIf="telefone2 != undefined" name="ios-call-outline"></ion-icon> <a *ngIf="telefone2 != undefined" href="tel:{{telefone2}}" >{{telefone2}}</a>

            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>
      <ion-item>
        <h2>Comentários</h2>
        <ion-list *ngFor="let comentario of comentarios">
          <ion-item>
            <ion-avatar item-start>
              <img src="{{comentario.imagem}}">
            </ion-avatar>
            <h2>{{comentario.usuario}}</h2>
            <p>{{comentario.comentario}}</p>
          </ion-item>
        </ion-list>
      </ion-item>
      <ion-item *ngIf="logado == false" text-center>
        <p>É necessario estar logado para comentar. </p>
        <p ><a (click)="openModal({id: id})">Clique aqui para logar</a></p>

      </ion-item>
      <ion-list *ngIf="logado == true">
        <ion-item>
          <ion-label stacked>Comentar</ion-label>
          <ion-avatar item-start>
            <img src="{{user.imagem}}">
          </ion-avatar>
          <ion-input type="text"  name="novoComentario" [(ngModel)]="novoComentario" (keyup.enter)="addComentario()"></ion-input>
        </ion-item>
        <button ion-button outline round (click)="addComentario()">Comentar</button>
      </ion-list>
      <ion-item>
          <ion-grid *ngIf="facebook || instagram">
              <ion-row>
                <ion-col col-9>
                  <small>Veja mais de {{nome}} em:</small>
                </ion-col>
                <ion-col col-3>
                  <ion-icon name="logo-instagram" class="instagram" *ngIf="instagram" (click)='OpenUrl(instagram);'style="font-size: 2.0em"></ion-icon>
                  <ion-icon name="logo-facebook" class="facebook" *ngIf="facebook" (click)='OpenUrl(facebook);' style="font-size: 2.0em"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
      </ion-item>
    </ion-card>
</ion-content>

